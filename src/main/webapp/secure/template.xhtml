<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf">
    <h:head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css"/>
        <link href="https://fonts.googleapis.com/css?family=Lato:400,900&#38;;display=swap&#38;;subset=latin-ext"
              rel="stylesheet"/>

        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/resources/carpenter/img/worker.png"/>

        <!--BOOTSTRAP MODAL -->
        <h:outputStylesheet library="carpenter" name="plugins/bootstrap-modal.css"/>

        <!-- JS -->
        <h:outputScript library="carpenter" name="/js/jquery-3.4.1.min.js"/>
        <h:outputScript library="carpenter" name="/js/modal-bootstrap.js"/>
        <h:outputScript library="carpenter" name="js/carpenter.js"/>
        <h:outputScript library="carpenter" name="/js/multiple-select.js"/>

        <!--CSS -->
        <h:outputStylesheet library="carpenter" name="css/style.css"/>

        <!--DATEPICKER -->

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://npmcdn.com/flatpickr/dist/themes/material_green.css"/>

        <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
        <script src="https://npmcdn.com/flatpickr/dist/l10n/pl.js"></script>

        <script>
            flatpickr.localize(flatpickr.l10ns.pl);
        </script>

    </h:head>
    <h:body>

        <h:form>
            <div class="crm-header">

                <div class="main-menu">
                    <h:commandLink styleClass="#{pageTitle eq 'Kalendarz' ? 'active': ''}"
                                   action="#{navigationBean.calendarDayViewRedirect}">
                        <i class="fas fa-calendar-check"></i>Kalendarz
                        <f:ajax onevent="showLoader"/>
                    </h:commandLink>

                    <h:commandLink
                            action="#{navigationBean.employeesRedirect}">
                        <f:ajax onevent="showLoader"/>
                        <i class="fas fa-users"></i>Pracownicy
                    </h:commandLink>

                    <h:commandLink
                            action="#{navigationBean.employeeGroupRedirect}">
                        <f:ajax onevent="showLoader"/>
                        <i class="fas fa-users"></i>Grupy
                    </h:commandLink>

                    <h:commandLink
                            action="#{navigationBean.clientsRedirect}">
                        <i class="fas fa-user-tie"></i>Klienci
                    </h:commandLink>

                    <h:commandLink
                            action="#{navigationBean.invoiceRedirect}">
                        <i class="fas fa-file-invoice-dollar"></i>Faktury
                    </h:commandLink>

                    <ui:fragment rendered="#{employeeListBean.hasLoggedUserAdminOrManagerRole}">
                        <h:commandLink
                                action="#{navigationBean.offersRedirect}">
                            <f:ajax onevent="showLoader"/>
                            <i class="fas fa-envelope-open-text"></i>Oferty (#{offerListBean.unreadOffersFromLoggedUserCompany})
                        </h:commandLink>
                    </ui:fragment>
                </div>

                <div class="user-panel">
                    <div class="user-avatar">
                        <i class="far fa-user"></i>
                    </div>
                    <div class="user-info">
                        <h4>#{principalBean.loggedUser.firstName} #{principalBean.loggedUser.lastName}</h4>
                        <h4>#{principalBean.loggedUser.company.name}</h4>
                    </div>

                    <div class="actions">
                        <div class="admin"
                             jsf:rendered="#{principalBean.loggedUser.isInRole('ADMINISTRATOR')}">
                            <h:commandLink
                                    action="#{navigationBean.adminRedirect}">
                                <i class="fas fa-users-cog"></i>
                            </h:commandLink>
                        </div>
                        <div class="logout">
                            <h:commandLink action="#{loginController.logout}">
                                Wyloguj <i class="fa fa-chevron-right"/>
                            </h:commandLink>
                        </div>
                    </div>
                </div>

            </div>

        </h:form>

        <!-- LOADER -->
        <div class="loader" id="loader-main">
            <div>
                <div class="sk-folding-cube">
                    <div class="sk-cube1 sk-cube"></div>
                    <div class="sk-cube2 sk-cube"></div>
                    <div class="sk-cube4 sk-cube"></div>
                    <div class="sk-cube3 sk-cube"></div>
                </div>
            </div>
        </div>

        <!--CONTENT -->
        <div class="site-content" jsf:id="mainContainer">
            <ui:insert name="content"/>
        </div>

    </h:body>

</ui:composition>