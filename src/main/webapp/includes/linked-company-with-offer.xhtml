<?xml version="1.0" encoding="UTF-8"?>

<div id="linked-company-with-offer" class="modal modal-small fade"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://xmlns.jcp.org/jsf/html"
     xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
     xmlns:f="http://xmlns.jcp.org/jsf/core"
     xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
     xmlns:jsf="http://xmlns.jcp.org/jsf">

    <div>
        <a class="modal-close"
           data-dismiss="modal">
            <i class="fa fa-times"></i>
        </a>
        <div>
            <h:form id="linked-company-with-offer-form" prependId="false">
                <div>
                    <div class="modal-conent">
                        <div class="form-top">
                            <label>Połącz ofertę</label>
                            <h:selectOneMenu value="#{linkedClientWithOffer.offerLinkType}">
                                <f:selectItem itemLabel="Wybierz"/>
                                <f:selectItems value="#{linkedClientWithOffer.availableLinks}"
                                               var="l"
                                               itemLabel="#{l}"
                                               itemValue="#{l}"/>
                                <f:ajax execute="@this" event="change" render="linked-div" onevent="showLoader"/>
                            </h:selectOneMenu>
                        </div>
                        <div jsf:id="linked-div">
                            <div jsf:rendered="#{linkedClientWithOffer.offerLinkType.name() eq 'CREATE_NEW_ONE'}">
                                <div class="form-top">
                                    <label>Dodaj nowego Klienta</label>
                                    <ui:include src="/includes/add-client.xhtml"/>
                                </div>
                            </div>
                            <div jsf:rendered="#{linkedClientWithOffer.offerLinkType.name() eq 'CLIENT_EXISTS'}">
                                <div class="form-top">
                                    <label>Wybierz istniejącego klienta</label>
                                    <h:selectOneMenu id="link-client-with-offer-client"
                                                     converter="javax.faces.Long"
                                                     value="#{linkedClientWithOffer.offerId}">
                                        <f:selectItems value="#{linkedClientWithOffer.allClients}"
                                                       var="c"
                                                       itemLabel="#{c.name}"
                                                       itemValue="#{c.id}"/>
                                        <f:ajax execute="@this"
                                                event="change"/>
                                    </h:selectOneMenu>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </h:form>
        </div>
    </div>


</div>